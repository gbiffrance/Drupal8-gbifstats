{#
/**
 * @file
 * Default theme implementation to print GBIF Stats text.
 *
 * Available variables:
 *   - 'country_code'
 *   - 'last_datasets'
 *   - 'nb_publishers'
 *   - 'nb_occurrences'
 *
 * @ingroup themeable
 */
#}
<div class="stats">

    {#/*  General info */#}
    <div id="national_info">
        <p id="node_name">Node name : {{ node_name }}</p>
        <p id="website">Website : <a href="{{ website }}" target="_blank">{{ website }}</a></p>
        <p id="head_delegation">Head of the delegation : {{ head_delegation }}</p>
        <p id="node_manager">Node_manager : {{ node_manager }}</p>
        <p id="link_page_GBIF">link to the GBIF page : <a href="{{ link_page_GBIF }}" target="_blank">{{ link_page_GBIF }}</a></p>
    </div><hr/>

    {#/*  Check if we have data */#}
    {% if country_code|length != 2 %}
        <div class="stats-rond col-xs-12 col-sm-12">
            <p class="stats_texte">Code pays invalide - Mettez les deux lettres en majuscule correspondant à un pays.</p>
        </div>

    {#/*  Start displaying data */#}
    {% else %}

        <div class="stats-rond col-xs-12 col-sm-6">

        {% if nb_publishers  is not sameas("NoSelect") or  nb_occurrences  is not sameas("NoSelect") %}
            <p class="stats_texte">Sur le GBIF,</p>
        {% endif %}

        {#/*  Number of publishers number */#}
        {% if nb_publishers is not sameas("NoSelect") %}

            {% if nb_publishers|length > 0 %}
                <p class="stats_chiffre"><a href="https://www.gbif.org/fr/publisher/search?country={{ country_code }}" target="_blank">{{ nb_publishers }}</a></p>
            {% else %}
                <p class="stats_chiffre">Error : country unknow or getting no publishers</p>
            {% endif %}

            <p class="stats_texte">fournisseurs de donn&eacute;es fran&ccedil;ais publient</p>

        {% endif %}

        {#/*  Number of Occurrences number */#}
        {% if nb_occurrences is not sameas("NoSelect") %}

            {% if nb_occurrences|length > 0 %}
                <p class="stats_chiffre"><a href="https://www.gbif.org/fr/occurrence/search?publishing_country={{ country_code }}&advanced=1" target="_blank">{{ nb_occurrences }}</a></p>
            {% else %}
                <p class="stats_chiffre">Error : country unknow or getting no occurrences</p>
            {% endif %}


            <p class="stats_texte">occurrences de donn&eacute;es</p>
        {% endif %}

        </div>
        {#/*  End Number of Publishers & Occurrences number */#}

        {#/*  Last datasets  */#}
        {% if last_datasets is not sameas("NoSelect") %}

            <div class="stats-dataset col-xs-12 col-sm-6">

                {% if country_code|length == 2 and last_datasets|length > 0 %}
                    <h3 class="stats_texte">Derniers jeux de données publi&eacute;s :</h3>
                    <div class="stats_dataset">
                        <ul>

                            {% for dataset in last_datasets %}

                                {% if dataset|length > 0 and dataset.key_dataset|length > 0 and dataset.title_dataset|length > 0 %}
                                    <li class="stats_dataset_texte"><a href="https://www.gbif.org/dataset/{{ dataset.key_dataset }}" target="_blank">{{ dataset.title_dataset }}</a></li>
                                {% elseif dataset|length > 0 %}
                                    <li class="stats_dataset_texte">Error : dataset unknow</li>
                                {% else %}
                                    <li class="stats_dataset_texte">Error : No datasets</li>
                                {% endif %}

                            {% endfor %}

                        </ul>
                    </div>
                {% endif %}

            </div>

        {% endif %}
        {#/*  End Last datasets  */#}

    {% endif %}
    {#/*  End displaying data */#}
</div>